<!doctype html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>r21nomi.log &mdash; Art &amp; Tech log</title>
    
    <link rel="stylesheet" href="http://www.ryotaniinomi.com/css/main.css">
    <link rel="shortcut icon" href="http://www.ryotaniinomi.com/favicon.ico" type="image/x-icon" />
    <link rel="apple-touch-icon" href="http://www.ryotaniinomi.com/images/logo.gif"/>
    <link href="http://www.ryotaniinomi.com/index.xml" rel="alternate" type="application/rss+xml" title="r21nomi.log" />
    <meta name="title" content="http://www.ryotaniinomi.com">
    <link rel="canonical" href="http://www.ryotaniinomi.com">
    <meta property="og:title" content="r21nomi.log"/>
    <meta property="og:url" content="http://www.ryotaniinomi.com"/>
    <meta property="og:image" content="http://www.ryotaniinomi.com/images/logo.gif"/>   
    <meta property="og:site_name" content="r21nomi.log">
    
    <link rel="stylesheet" href="https://yandex.st/highlightjs/8.0/styles/monokai.min.css">
    <script src="https://yandex.st/highlightjs/8.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
</head>
<body>
    
<section class="site-nav">
    <header>
        <nav id="navigation">
            <a class="brand" href="/">
                <img src="http://www.ryotaniinomi.com/images/logo.gif" alt="Inc">
            </a>
            <a href="/" class="home">Blog</a>
            
            <a href="http://www.ryotaniinomi.com/about">About</a>
        </nav>
        <nav class="tagline">
            
            
        </nav>
    </header>
</section>



<article>

    <div class="container">
        <header>
            <div class="meta">
                <time pubdate datetime="2017-07-29" title="2017-07-29">2017-07-29</time>
            </div>
            <h1 class="title">glsl-livecoderを正常に使えるようにするまで</h1>
            <h2 class="subtitle"></h2>
        </header>

        <section>
            

<p><a href="https://github.com/fand/glsl-livecoder">glsl-livecoder</a>はglslでライブコーディングを行うためのAtomパッケージである。<br />
正常に動作できるようになるまでにやや手こずったのでメモしておく。</p>

<p>実行環境は、<code>macOS 10.12.5</code>。</p>

<h1 id="glsl-livecoderのインストール">glsl-livecoderのインストール</h1>

<pre><code>$ apm install glsl-livecoder
</code></pre>

<p>だが、Atomの設定で<code>glslangValidator</code>のパスを指定しないと正常に動かない。<br />
自分は<code>glslangValidator</code>をインストールしてなかったので、次のステップで方法を紹介。<br />
なかなかめんどくさい。</p>

<h1 id="glslangvalidatorのインストール">glslangValidatorのインストール</h1>

<p>基本的にリポジトリに記載されている<a href="https://github.com/KhronosGroup/glslang#build-steps">ビルドステップ</a>通りにやれば良いわけだが、わかりづらい。<br />
なので、以下に自分がやったステップを紹介する。</p>

<h3 id="1-khronosgroup-glslang-https-github-com-khronosgroup-glslang-リポジトリをクローン">1. <a href="https://github.com/KhronosGroup/glslang">KhronosGroup/glslang</a>リポジトリをクローン</h3>

<h3 id="2-cmake-https-cmake-org-のインストール">2. <a href="https://cmake.org/">CMake</a>のインストール</h3>

<p>CMakeはクロスプラットフォームのビルドツール。<br />
自分は、<a href="https://cmake.org/download/">ダウンロードページ</a>から<code>cmake-3.9.0-Darwin-x86_64.dmg</code>をインストールした。</p>

<h3 id="3-cmakeをコマンドラインから使えるよう設定">3. CMakeをコマンドラインから使えるよう設定</h3>

<pre><code>$ sudo &quot;/Applications/CMake.app/Contents/bin/cmake-gui&quot; --install
</code></pre>

<p>これで<code>$ cmake</code>が使えるようになる。<br />
この設定コマンドは、<code>CMake.app</code>の<code>Tools/How to Install For Command Line Use</code>に記載されている。</p>

<h3 id="4-glslang-リポジトリの-ビルドステップ-https-github-com-khronosgroup-glslang-build-steps-に沿って実行">4. <code>glslang</code>リポジトリの<a href="https://github.com/KhronosGroup/glslang#build-steps">ビルドステップ</a>に沿って実行</h3>

<p><a href="https://github.com/KhronosGroup/glslang#1-check-out-this-project">1) Check-Out this project</a><br />
すでにクローンしてるのでスキップ。</p>

<p><a href="https://github.com/KhronosGroup/glslang#2-check-out-external-projects">2) Check-Out External Projects</a><br />
必要なステップだったか正直わからないが、一応1)で作ったディレクトリ内にクローンしておいた。</p>

<p><a href="https://github.com/KhronosGroup/glslang#3-configure">3) Configure</a><br />
Mac上での作業だったが、wnidow向けとして書かれていたステップで実行。<br />
glslangをクローンしたディレクトリ上で下記コマンドを実行。</p>

<pre><code>$ cmake ./ -DCMAKE_INSTALL_PREFIX=`pwd`/install
</code></pre>

<p><a href="https://github.com/KhronosGroup/glslang#4-build-and-install">4) Build and Install</a><br />
こちらも<code>for Windows</code>と書かれている方で実行。</p>

<pre><code>$ cmake --build . --config {Release|Debug|MinSizeRel|RelWithDebInfo} \ --target install
</code></pre>

<p>ただ、ドキュメントに記載されてた上記コマンドだと諸々のコマンドが見つからない旨のエラーが出た。</p>

<pre><code>-bash: Debug: command not found
-bash: MinSizeRel: command not found
-bash: RelWithDebInfo}: command not found
make[2]: *** [hlsl/CMakeFiles/HLSL.dir/depend] Error 141
make[1]: *** [hlsl/CMakeFiles/HLSL.dir/all] Error 2
make: *** [all] Error 2
</code></pre>

<p>なので、congif指定を外して実行。</p>

<pre><code>$ cmake --build . --target install
</code></pre>

<pre><code>...
-- Installing: /Users/r21nomi/workspace/shader/glslang/install/bin/glslangValidator
...
</code></pre>

<p><code>glslangValidator</code>がインストールされたので、これで準備完了。</p>

<h1 id="glsl-livecoderでglslangvalidatorのパスを設定">glsl-livecoderでglslangValidatorのパスを設定</h1>

<p>Atomの<code>Preferences -&gt; glsl-livecoderのSettings</code>から<code>glslangValidator path</code>欄にインストールした<code>glslangValidator</code>のパスを設定。<br />
自分の場合は<code>/Users/r21nomi/workspace/shader/glslang/install/bin/glslangValidator</code>。</p>

<p>これでシェーダーファイルを開いて<code>ctrl-enter</code>とかやるとシェーダープログラムがコンパイルされて、背景に描画されるようになる。</p>

            
        </section>

        
    </div>
</article>

<footer class="site-footer">
    <div class="container">
        <nav>
            <a href="http://www.ryotaniinomi.com"></a> &middot;
            <a href="/">Blog</a> &middot;
            
            <a href="http://www.ryotaniinomi.com/about">About</a>
        </nav>

        <nav class="social">
            
            <a href="https://twitter.com/r21nomi" title="Follow on Twitter" target="_blank"><i class="icon icon-twitter black"></i></a>
            
            
            <a href="https://github.com/r21nomi" title="Follow on Github" target="_blank"><i class="icon icon-github black"></i></a>
            
            
            <a href="/index.xml" title="RSS Feed">
                <i class="icon icon-rss black"></i>
            </a>
        </nav>
    </div>
</footer>
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript" src="http://www.ryotaniinomi.com/js/main.js"></script>

<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=253595308025739";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>


<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-81203103-1', 'auto');
ga('send', 'pageview');
</script>





</body>
</html>

